import React from "react"
import { connect } from "react-redux"
import Switch from "react-switch"
import styled from "styled-components"

import { rhythm } from "../utils/typography"

const ThemeSwitch = ({ isDarkMode, toggleTheme }) => {
  const darkMode = isDarkMode

  const labelColor = isDarkMode
    ? "rgba(255, 255, 255, 0.6)"
    : "rgba(55, 53, 47, 0.6)"

  return (
    <SwitchContainer>
      <label
        htmlFor="theme-switcher"
        style={{
          marginRight: "12px",
          display: "flex",
          alignItems: "center",
        }}
      >
        <svg viewBox="0 0 50 50" width="25">
          <path
            fill={labelColor}
            d="m24.90625 3.96875c-.042969.007813-.085937.019531-.125.03125-.464844.105469-.792969.523438-.78125 1v6c-.003906.359375.183594.695313.496094.878906.3125.179688.695312.179688 1.007812 0 .3125-.183593.5-.519531.496094-.878906v-6c.011719-.289062-.105469-.566406-.3125-.761719-.210937-.199218-.496094-.296875-.78125-.269531zm-14.25 5.875c-.375.066406-.675781.339844-.78125.703125-.105469.367188.003906.757813.28125 1.015625l4.25 4.25c.242188.296875.628906.433594 1.003906.347656.371094-.085937.664063-.378906.75-.75.085938-.375-.050781-.761718-.347656-1.003906l-4.25-4.25c-.207031-.222656-.507812-.335937-.8125-.3125-.03125 0-.0625 0-.09375 0zm28.375 0c-.226562.03125-.4375.144531-.59375.3125l-4.25 4.25c-.296875.242188-.433594.628906-.347656 1.003906.085937.371094.378906.664063.75.75.375.085938.761719-.050781 1.003906-.347656l4.25-4.25c.3125-.296875.402344-.761719.21875-1.152344-.1875-.394531-.601562-.621093-1.03125-.566406zm-14.125 5.15625c-.03125.007813-.0625.019531-.09375.03125-.0625.003906-.125.015625-.1875.03125-.011719.011719-.019531.019531-.03125.03125-5.304687.226563-9.59375 4.546875-9.59375 9.90625 0 5.503906 4.496094 10 10 10s10-4.496094 10-10c0-5.339844-4.253906-9.644531-9.53125-9.90625-.035156 0-.058594-.03125-.09375-.03125-.101562-.039062-.207031-.058594-.3125-.0625-.019531 0-.042969 0-.0625 0-.03125 0-.0625 0-.09375 0zm.03125 2h.0625.09375c4.375.050781 7.90625 3.613281 7.90625 8 0 4.421875-3.578125 8-8 8-4.417969 0-8-3.578125-8-8 0-4.398437 3.546875-7.964844 7.9375-8zm-20.21875 7c-.550781.078125-.9375.589844-.859375 1.140625s.589844.9375 1.140625.859375h6c.359375.003906.695313-.183594.878906-.496094.179688-.3125.179688-.695312 0-1.007812-.183593-.3125-.519531-.5-.878906-.496094h-6c-.03125 0-.0625 0-.09375 0s-.0625 0-.09375 0-.0625 0-.09375 0zm34 0c-.550781.078125-.9375.589844-.859375 1.140625s.589844.9375 1.140625.859375h6c.359375.003906.695313-.183594.878906-.496094.179688-.3125.179688-.695312 0-1.007812-.183593-.3125-.519531-.5-.878906-.496094h-6c-.03125 0-.0625 0-.09375 0s-.0625 0-.09375 0-.0625 0-.09375 0zm-23.71875 9.875c-.226562.03125-.4375.144531-.59375.3125l-4.25 4.25c-.296875.242188-.433594.628906-.347656 1.003906.085937.371094.378906.664063.75.75.375.085938.761719-.050781 1.003906-.347656l4.25-4.25c.296875-.285156.386719-.726562.226563-1.105469-.15625-.378906-.535157-.621093-.945313-.613281-.03125 0-.0625 0-.09375 0zm19.6875 0c-.375.066406-.675781.339844-.78125.703125-.105469.367188.003906.757813.28125 1.015625l4.25 4.25c.242188.296875.628906.433594 1.003906.347656.371094-.085937.664063-.378906.75-.75.085938-.375-.050781-.761718-.347656-1.003906l-4.25-4.25c-.1875-.199219-.445312-.308594-.71875-.3125-.03125 0-.0625 0-.09375 0s-.0625 0-.09375 0zm-9.78125 4.09375c-.042969.007813-.085937.019531-.125.03125-.464844.105469-.792969.523438-.78125 1v6c-.003906.359375.183594.695313.496094.878906.3125.179688.695312.179688 1.007812 0 .3125-.183593.5-.519531.496094-.878906v-6c.011719-.289062-.105469-.566406-.3125-.761719-.210937-.199218-.496094-.296875-.78125-.269531z"
          />
        </svg>
      </label>
      <Switch
        id="theme-switcher"
        onChange={() => toggleTheme()}
        checked={darkMode}
        onColor="#F246AE"
        offColor="#D4D4CE"
        onHandleColor="#FFFFFF"
        offHandleColor="#FFFFFF"
        uncheckedIcon={false}
        checkedIcon={false}
        height={45}
        width={80}
        handleDiameter={34}
        role="checkbox"
        aria-checked={darkMode}
        aria-label="toggle theme"
      />
      <label
        htmlFor="theme-switcher"
        style={{
          marginLeft: "12px",
          display: "flex",
          alignItems: "center",
        }}
      >
        <svg viewBox="0 0 50 50" width="22.5">
          <path
            fill={labelColor}
            d="m31 4c-11.585937 0-21 9.414063-21 21 0 11.585938 9.414063 21 21 21 2.988281 0 5.828125-.632812 8.402344-1.757812.363281-.160157.597656-.519532.597656-.917969 0-.398438-.234375-.757813-.597656-.917969-6.707031-2.929687-11.402344-9.609375-11.402344-17.40625s4.695313-14.476562 11.402344-17.40625c.363281-.160156.597656-.519531.597656-.917969 0-.398437-.234375-.757812-.597656-.917968-2.574219-1.125-5.414063-1.757813-8.402344-1.757813zm0 2c1.984375 0 3.855469.398438 5.65625.96875-6.300781 3.625-10.65625 10.25-10.65625 18.03125s4.355469 14.40625 10.65625 18.03125c-1.800781.570313-3.671875.96875-5.65625.96875-10.503906 0-19-8.496094-19-19s8.496094-19 19-19z"
          />
        </svg>
      </label>
    </SwitchContainer>
  )
}

const mapStateToProps = state => ({
  isDarkMode: state.theme.isDarkMode,
})

const mapDispatchToProps = dispatch => {
  return {
    toggleTheme: () => dispatch({ type: "TOGGLE_THEME" }),
  }
}

export default connect(
  mapStateToProps,
  mapDispatchToProps
)(ThemeSwitch)

const SwitchContainer = styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: ${rhythm(2)};
  margin-bottom: ${rhythm(2)};
`
